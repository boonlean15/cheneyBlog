# DDL创建数据库和数据表时需要注意什么

## DDL基础语法和设计工具
### 设计工具
- 工具 navicat
  > 可以使用一些可视化工具来创建和操作数据库和数据表
### DDL基础语法
- 数据库定义
  ```sql
    CREATE DATABASE nba;//创建一个名为nba的数据库
    DROP DATABASE nba;//删除一个名为nba的数据库
  ```
- 数据表定义
  ```sql
    //创建表语法
    CREATE TABLE table_name
  ```
- 创建表结构
  ```sql
    CREATE TABLE player (
        player_id int(11) NOT NULL AUTO_INCREMENT,
        player_name varchar(255) NOT NULL 
    );
    //NOT NULL表明整个字段不能是空值，是一种数据约束,AUTO_INCREMENT代表主键自动增长
  ```
    > int(11) 代表整数类型，显示长度为 11 位,括号中的参数 11 代表的是最大有效显示长度,**与类型包含的数值范围大小无关**

### 修改表结构
- 添加字段
- 修改字段名
- 修改字段的数据类型
- 删除字段
  ```sql
    ALTER TABLE player ADD (age int(11));
    ALTER TABLE player RENAME COLUMN age to player_age;
    ALTER TABLE player MODIFY (player_age float(3,2));
    ALTER TABLE player DROP COLUMN player_age;
  ```

## 数据表常见约束
- 主键约束 唯一标识一条记录
- 外键约束 确保表与表之间引用的完整性
  - 一个表的外键对应另一张表的主键
  - 外键可以是重复的，也可以为空
- 唯一性约束 表明字段在表中的数值是唯一的
  - 即使有了主键，还可以对其他字段进行唯一性约束
  - 唯一性约束相当于创建了一个约束和普通索引，目的是保证字段的正确性，
- 普通索引 只是提升数据检索的速度，并不对字段的唯一性进行约束
- NOT NULL约束 表明该字段不应为空，必须有取值
- DEFAULT 表明了字段的默认值，这个字段没有取值，就设置为默认值
- CHECK 约束 用来检查特定字段取值范围的有效性
  > CHECK 约束的结果不能为 FALSE，比如我们可以对身高 height 的数值进行 CHECK 约束，必须≥0，且＜3，即CHECK(height>=0 AND height<3)。

## 设计数据表的原则
### 设计数据表常考虑的各种问题
- 用户需要什么数据？
- 需要在数据表中保存什么数据？
- 哪些数据是经常访问的数据？
- 如何提升检索效率？
- 如何保证数据表中数据的正确性，添加、删除、更新的时候进行怎样的约束？
- 如何降低数据表的数据冗余度，保证数据表不会因为用户量的增长而迅速扩张？
- 如何让负责数据库维护的人员更方便的使用数据库？

### 设计原则
- 数据表的个数越少越好 
  > RDBMS 的核心在于对实体和联系的定义，也就是 E-R 图（Entity Relationship Diagram），数据表越少，证明实体和联系设计得越简洁，既方便理解又方便操作。
- 数据表的字段个数越少越好
  > 字段个数越多，数据冗余的可能性越大。设置字段个数少的前提是各个字段相互独立，而不是某个字段的取值可以由其他字段计算出来。
  > 当然字段个数少是相对的，我们通常会在数据冗余和检索效率中进行平衡。
- 数据表中联合主键的字段个数越少越好
  > 设置主键是为了确定唯一性，当一个字段无法确定唯一性的时候，就需要采用联合主键的方式（也就是用多个字段来定义一个主键）。
  > 联合主键中的字段越多，占用的索引空间越大，不仅会加大理解难度，还会增加运行时间和索引空间，因此联合主键的字段个数越少越好。
- 使用主键和外键越多越好
  > 数据库的设计实际上就是定义各种表，以及各种字段之间的关系。这些关系越多，证明这些实体之间的冗余度越低，利用度越高。这样做的好处在于不仅保证了数据表之间的独立性，还能提升相互之间的关联使用率。

> “三少一多”原则的核心就是简单可复用。简单指的是用更少的表、更少的字段、更少的联合主键字段来完成数据表的设计。可复用则是通过主键、外键的使用来增强数据表之间的复用率。因为一个主键可以理解是一张表的代表。键设计得越多，证明它们之间的利用率越高。